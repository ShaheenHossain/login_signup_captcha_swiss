<?xml version="1.0" encoding="utf-8"?>
<swiss>

  <!-- Login Page -->
  <template id="login_recaptcha_inherit" inherit_id="auth_signup.login">
    <xpath expr="//button[@type='submit']" position="before">
      <script src="https://www.google.com/recaptcha/api.js" async="async" defer="defer"></script>
      <div class="form-group">
        <div class="g-recaptcha"
             data-sitekey="6Le5nMQUAAAAALpK02mtPPGnpjVlnq6orhz4Zj0u"
             data-callback="verifyRecaptchaCallback"
             data-expired-callback="expiredRecaptchaCallback">
        </div>
        <div class="help-block with-errors" id="login-captcha-error" style="color: red;"></div>
      </div>
      <script type="text/javascript">
        odoo.define('login_signup_captcha.login_recaptcha', function (require) {
          require('web.dom_ready');
          $('form').on('submit', function (event) {
            var recaptcha = $('#g-recaptcha-response').val();
            if (!recaptcha) {
              event.preventDefault();
              $('#login-captcha-error').text("Por favor verificar el Captcha.");
            }
          });
        });
      </script>
    </xpath>
  </template>

  <!-- Signup Page -->
  <template id="signup_recaptcha_inherit" inherit_id="auth_signup.signup">
    <xpath expr="//button[@type='submit']" position="before">
      <script src="https://www.google.com/recaptcha/api.js" async="async" defer="defer"></script>
      <div class="form-group">
        <div class="g-recaptcha"
             data-sitekey="6Le5nMQUAAAAALpK02mtPPGnpjVlnq6orhz4Zj0u"
             data-callback="verifyRecaptchaCallback"
             data-expired-callback="expiredRecaptchaCallback">
        </div>
        <div class="help-block with-errors" id="signup-captcha-error" style="color: red;"></div>
      </div>
      <script type="text/javascript">
        odoo.define('login_signup_captcha.signup_recaptcha', function (require) {
          require('web.dom_ready');
          $('.oe_signup_form').on('submit', function (event) {
            var recaptcha = $('#g-recaptcha-response').val();
            if (!recaptcha) {
              event.preventDefault();
              $('#signup-captcha-error').text("Por favor verificar el Captcha.");
            }
          });
        });
      </script>
    </xpath>
  </template>

</swiss>
